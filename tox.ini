[tox]
envlist = py26-sqlalchemy{10,11}
skipsdist = true

[testenv]
deps =
    py{26}: pytest>=2.7.2,<3.3.0
    pytest-pep8
    pytest-cov
    py{26}: MySQL-python
    cymysql
    sqlalchemy10: sqlalchemy>=1.0,<1.1
    sqlalchemy11: sqlalchemy>=1.1,<1.2
commands =
    py.test {posargs}

setenv =
    CC_SPHINX_HOST = {env:CC_SPHINX_HOST:127.0.0.1}
    CC_SPHINX_PORT = {env:CC_SPHINX_PORT:9008}

passenv = TRAVIS TRAVIS_JOB_ID TRAVIS_BRANCH

[pytest]
pep8maxlinelength = 120
pep8ignore = E128 E712 E711 E124
clearcache = True
addopts = -s -l --color=yes -vv --ff --pep8 --durations=5 --cov-fail-under=97 --cov-config .coveragerc --cov=sqlalchemy_sphinx tests/ sqlalchemy_sphinx/
norecursedirs = .git _build tmp* .tox .eggs env/
python_files=test*.py
